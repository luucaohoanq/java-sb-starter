api:
  prefix: /api

spring:
  application:
    name: orchidbe

  profiles:
    active: test

  mail:
    host: ${MAIL_HOST:smtp.gmail.com}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME:you_username_here@example.com}
    password: ${MAIL_PASSWORD:your_password_here}
    base-url: http://127.0.0.1:8080

springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    operations-sorter: alpha
    tags-sorter: alpha
    try-it-out-enabled: true
    filter: true
    doc-expansion: none
    enabled: true
    path: /swagger-ui.html

# JWT configuration
jwt:
  expiration: ${JWT_EXPIRATION:86400} #1 day = 1 * 24 * 60 * 60
  expiration-refresh-token: ${JWT_REFRESH_TOKEN_EXPIRATION:5184000} #60 days = 60 * 24 * 60 * 60
  secretKey: ${JWT_SECRET_KEY:LuuCaoHoangLuuCaoHoangLuuCaoHoangLuuCaoHoangLuuCaoHoang}

# Performance monitoring with Actuator + Micrometer
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus,httptrace,beans,env,loggers
      base-path: /actuator
  endpoint:
    health:
      show-details: always
    metrics:
      access: unrestricted
    prometheus:
      access: unrestricted
  metrics:
    web:
      server:
        max-uri-tags: 100
    distribution:
      percentiles-histogram:
        http:
          server:
            requests: true
      percentiles:
        http:
          server:
            requests: 0.5,0.95,0.99

  prometheus:
    metrics:
      export:
        enabled: true

# Logging configuration
logging:
  config: classpath:logback-spring.xml
  level:
    # Your application logging level
    com.orchid.orchidbe: ${APP_LOG_LEVEL:INFO}

    # Framework logging levels (reduce noise)
    org.springframework: ${SPRING_LOG_LEVEL:WARN}
    org.springframework.web: ${SPRING_WEB_LOG_LEVEL:INFO}
    org.springframework.security: ${SECURITY_LOG_LEVEL:INFO}
    org.springframework.data.mongodb: ${MONGO_LOG_LEVEL:INFO}

    # Root level
    root: ${ROOT_LOG_LEVEL:WARN}

    # Uncomment for SQL debugging
    # org.hibernate.SQL: DEBUG
    # org.hibernate.type.descriptor.sql.BasicBinder: TRACE

  # Pattern for console (only used if not overridden by logback-spring.xml)
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %highlight(%-5level) %cyan(%logger{36}) %X{requestId:--} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} %X{requestId:--} - %msg%n"
